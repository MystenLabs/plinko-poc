{"version":3,"sources":["../src/index.ts"],"sourcesContent":["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  SignedTransaction,\n  SuiTransactionBlockResponse,\n  SignedMessage,\n} from \"@mysten/sui.js\";\nimport {\n  SuiSignTransactionBlockInput,\n  SuiSignAndExecuteTransactionBlockInput,\n  WalletAccount,\n  SuiSignMessageInput,\n} from \"@mysten/wallet-standard\";\n\nexport interface WalletAdapterEvents {\n  change(changes: {\n    connected?: boolean;\n    accounts?: readonly WalletAccount[];\n  }): void;\n}\n\nexport interface WalletAdapter {\n  // Metadata\n  name: string;\n  icon?: string;\n\n  connected: boolean;\n  connecting: boolean;\n  // Connection Management\n  connect: () => Promise<void>;\n  disconnect: () => Promise<void>;\n  on: <E extends keyof WalletAdapterEvents>(\n    event: E,\n    callback: WalletAdapterEvents[E]\n  ) => () => void;\n  signMessage(messageInput: SuiSignMessageInput): Promise<SignedMessage>;\n  signTransactionBlock(\n    transactionInput: SuiSignTransactionBlockInput\n  ): Promise<SignedTransaction>;\n  /**\n   * Suggest a transaction for the user to sign. Supports all valid transaction types.\n   */\n  signAndExecuteTransactionBlock(\n    transactionInput: SuiSignAndExecuteTransactionBlockInput\n  ): Promise<SuiTransactionBlockResponse>;\n\n  getAccounts: () => Promise<readonly WalletAccount[]>;\n}\n\ntype WalletAdapterProviderUnsubscribe = () => void;\n\n/**\n * An interface that can dynamically provide wallet adapters. This is useful for\n * cases where the list of wallet adapters is dynamic.\n */\nexport interface WalletAdapterProvider {\n  /** Get a list of wallet adapters from this provider. */\n  get(): WalletAdapter[];\n  /** Detect changes to the list of wallet adapters. */\n  on(\n    eventName: \"changed\",\n    callback: () => void\n  ): WalletAdapterProviderUnsubscribe;\n}\n\nexport type WalletAdapterOrProvider = WalletAdapterProvider | WalletAdapter;\nexport type WalletAdapterList = WalletAdapterOrProvider[];\n\nexport function isWalletAdapter(\n  wallet: WalletAdapterOrProvider\n): wallet is WalletAdapter {\n  return \"connect\" in wallet;\n}\n\nexport function isWalletProvider(\n  wallet: WalletAdapterOrProvider\n): wallet is WalletAdapterProvider {\n  return !isWalletAdapter(wallet);\n}\n\n/**\n * Takes an array of wallet adapters and providers, and resolves it to a\n * flat list of wallet adapters.\n */\nexport function resolveAdapters(adapterAndProviders: WalletAdapterList) {\n  return adapterAndProviders.flatMap((adapter) => {\n    if (isWalletProvider(adapter)) {\n      return adapter.get();\n    }\n\n    return adapter;\n  });\n}\n"],"mappings":";AAqEO,SAAS,gBACd,QACyB;AACzB,SAAO,aAAa;AACtB;AAEO,SAAS,iBACd,QACiC;AACjC,SAAO,CAAC,gBAAgB,MAAM;AAChC;AAMO,SAAS,gBAAgB,qBAAwC;AACtE,SAAO,oBAAoB,QAAQ,CAAC,YAAY;AAC9C,QAAI,iBAAiB,OAAO,GAAG;AAC7B,aAAO,QAAQ,IAAI;AAAA,IACrB;AAEA,WAAO;AAAA,EACT,CAAC;AACH;","names":[]}